<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THEMIS | Council & Deliberation Agent</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    :root { --themis-primary: #22d3ee; --themis-primary-dark: #0891b2; --themis-accent: #67e8f9; --themis-bg: #0c1222; --themis-surface: #111827; --themis-elevated: #1f2937; --themis-border: #374151; --status-online: #10b981; --status-deliberating: #f59e0b; --status-away: #ef4444; }
    [data-theme="dark"] { --bg-base: var(--themis-bg); --bg-surface: var(--themis-surface); --bg-elevated: var(--themis-elevated); --border: var(--themis-border); --text-primary: #f9fafb; --text-secondary: #d1d5db; --text-muted: #9ca3af; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg-base); color: var(--text-primary); min-height: 100vh; }
    .app-layout { display: flex; min-height: 100vh; }
    .sidebar { width: 220px; background: var(--bg-surface); border-right: 1px solid var(--border); padding: 24px 0; display: flex; flex-direction: column; }
    .sidebar-header { padding: 0 24px 32px; border-bottom: 1px solid var(--border); }
    .sidebar-logo { display: flex; align-items: center; gap: 8px; font-size: 1.25rem; font-weight: 700; }
    .sidebar-logo .icon { font-size: 1.5rem; }
    .sidebar-logo span { background: linear-gradient(135deg, var(--themis-primary), var(--themis-accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .sidebar-nav { flex: 1; padding: 24px 0; }
    .nav-item { display: flex; align-items: center; gap: 8px; padding: 8px 24px; color: var(--text-secondary); text-decoration: none; transition: all 0.2s; cursor: pointer; border-left: 3px solid transparent; }
    .nav-item:hover { background: var(--bg-hover); color: var(--text-primary); }
    .nav-item.active { background: rgba(34, 211, 238, 0.1); color: var(--themis-primary); border-left-color: var(--themis-primary); }
    .nav-item .icon { font-size: 1.1rem; }
    .main-content { flex: 1; display: flex; flex-direction: column; }
    .header { background: var(--bg-surface); border-bottom: 1px solid var(--border); padding: 16px 32px; display: flex; align-items: center; justify-content: space-between; }
    .header-left { display: flex; align-items: center; gap: 24px; }
    .back-btn { display: flex; align-items: center; gap: 4px; padding: 8px 16px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; color: var(--text-secondary); text-decoration: none; font-size: 0.875rem; transition: all 0.2s; }
    .back-btn:hover { border-color: var(--themis-primary); color: var(--themis-primary); }
    .agent-profile { display: flex; align-items: center; gap: 16px; }
    .agent-avatar-lg { width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, var(--themis-primary), var(--themis-primary-dark)); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
    .agent-details h1 { font-size: 1.25rem; font-weight: 600; }
    .agent-details span { font-size: 0.75rem; color: var(--text-muted); }
    .header-right { display: flex; align-items: center; gap: 24px; }
    .status-badge { display: flex; align-items: center; gap: 4px; padding: 4px 16px; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
    .status-badge.online { background: rgba(16, 185, 129, 0.1); color: var(--status-online); }
    .status-badge.deliberating { background: rgba(245, 158, 11, 0.1); color: var(--status-deliberating); }
    .status-badge.away { background: rgba(239, 68, 68, 0.1); color: var(--status-away); }
    .status-dot { width: 8px; height: 8px; border-radius: 50%; background: currentColor; animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .content-area { flex: 1; padding: 32px; overflow-y: auto; }
    .view-section { display: none; }
    .view-section.active { display: block; }
    .page-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 32px; display: flex; align-items: center; gap: 8px; }
    .page-title .icon { font-size: 1.75rem; }
    .card { background: var(--bg-surface); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 24px; }
    .card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
    .card-title { font-size: 1rem; font-weight: 600; display: flex; align-items: center; gap: 8px; }
    .form-group { margin-bottom: 24px; }
    .form-label { display: block; font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 8px; }
    .form-input, .form-select, .form-textarea { width: 100%; padding: 8px 16px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary); font-size: 0.875rem; transition: border-color 0.2s; }
    .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--themis-primary); }
    .form-textarea { min-height: 100px; resize: vertical; }
    .btn { display: inline-flex; align-items: center; justify-content: center; gap: 4px; padding: 8px 24px; border-radius: 8px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s; border: none; font-family: inherit; }
    .btn-primary { background: linear-gradient(135deg, var(--themis-primary), var(--themis-primary-dark)); color: #0f172a; }
    .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(34, 211, 238, 0.3); }
    .btn-secondary { background: var(--bg-elevated); border: 1px solid var(--border); color: var(--text-secondary); }
    .btn-secondary:hover { border-color: var(--themis-primary); color: var(--themis-primary); }
    .btn-success { background: rgba(16, 185, 129, 0.1); color: var(--status-online); border: 1px solid var(--status-online); }
    .btn-warning { background: rgba(245, 158, 11, 0.1); color: var(--status-deliberating); border: 1px solid var(--status-deliberating); }
    .btn-danger { background: rgba(239, 68, 68, 0.1); color: var(--status-away); border: 1px solid var(--status-away); }
    .participant-list { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
    .participant-chip { display: flex; align-items: center; gap: 4px; padding: 4px 8px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 9999px; font-size: 0.75rem; }
    .participant-chip .remove { cursor: pointer; opacity: 0.6; }
    .participant-chip .remove:hover { opacity: 1; }
    .timer-display { font-size: 3rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; text-align: center; color: var(--themis-primary); margin: 24px 0; }
    .timer-controls { display: flex; justify-content: center; gap: 16px; }
    .transcript { max-height: 300px; overflow-y: auto; background: var(--bg-base); border-radius: 8px; padding: 16px; }
    .transcript-entry { padding: 8px 0; border-bottom: 1px solid var(--border); }
    .transcript-entry:last-child { border-bottom: none; }
    .transcript-speaker { font-weight: 600; color: var(--themis-primary); font-size: 0.875rem; }
    .transcript-text { color: var(--text-secondary); font-size: 0.875rem; margin-top: 4px; }
    .transcript-time { font-size: 0.75rem; color: var(--text-muted); margin-left: 8px; }
    .progress-bar { height: 8px; background: var(--bg-base); border-radius: 9999px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, var(--themis-primary), var(--themis-accent)); transition: width 0.5s; }
    .chart-container { height: 200px; position: relative; }
    .chart-canvas { width: 100%; height: 100%; }
    .debate-split { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .debate-side { padding: 24px; background: var(--bg-elevated); border-radius: 12px; }
    .debate-side.pro { border: 1px solid var(--status-online); }
    .debate-side.con { border: 1px solid var(--status-away); }
    .debate-side h3 { margin-bottom: 16px; }
    .debate-side.pro h3 { color: var(--status-online); }
    .debate-side.con h3 { color: var(--status-away); }
    .argument-canvas { height: 400px; background: var(--bg-base); border-radius: 12px; position: relative; overflow: hidden; cursor: grab; }
    .argument-canvas:active { cursor: grabbing; }
    .arg-node { position: absolute; padding: 16px; background: var(--bg-surface); border: 2px solid var(--themis-primary); border-radius: 12px; min-width: 150px; cursor: pointer; transition: all 0.2s; z-index: 10; }
    .arg-node:hover { transform: scale(1.05); box-shadow: 0 4px 20px rgba(34, 211, 238, 0.3); }
    .arg-node.claim { border-color: #8b5cf6; }
    .arg-node.evidence { border-color: #10b981; }
    .arg-node.opposition { border-color: #ef4444; }
    .arg-node-title { font-weight: 600; font-size: 0.875rem; }
    .arg-node-type { font-size: 0.625rem; text-transform: uppercase; color: var(--text-muted); }
    .poll-option { padding: 16px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: 8px; margin-bottom: 8px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: space-between; }
    .poll-option:hover { border-color: var(--themis-primary); }
    .poll-option.selected { border-color: var(--themis-primary); background: rgba(34, 211, 238, 0.1); }
    .poll-option .vote-count { font-weight: 600; color: var(--themis-primary); }
    .poll-results { margin-top: 24px; }
    .poll-result-bar { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; }
    .poll-result-bar .label { min-width: 100px; font-size: 0.875rem; }
    .poll-result-bar .bar { flex: 1; height: 24px; background: var(--bg-base); border-radius: 4px; overflow: hidden; }
    .poll-result-bar .fill { height: 100%; background: linear-gradient(90deg, var(--themis-primary), var(--themis-accent)); display: flex; align-items: center; justify-content: flex-end; padding-right: 8px; font-size: 0.75rem; font-weight: 600; }
    .poll-result-bar .percent { min-width: 50px; text-align: right; font-weight: 600; }
    .summary-content { background: var(--bg-elevated); border-radius: 8px; padding: 24px; line-height: 1.6; }
    .action-items { margin-top: 24px; }
    .action-item { display: flex; align-items: flex-start; gap: 8px; padding: 8px 0; border-bottom: 1px solid var(--border); }
    .action-item:last-child { border-bottom: none; }
    .action-checkbox { margin-top: 4px; }
    .role-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 24px; }
    .role-card { padding: 24px; background: var(--bg-elevated); border: 2px solid var(--border); border-radius: 16px; text-align: center; transition: all 0.2s; }
    .role-card:hover { border-color: var(--themis-primary); }
    .role-card.filled { border-color: var(--themis-primary); }
    .role-icon { font-size: 2rem; margin-bottom: 8px; }
    .role-name { font-weight: 600; margin-bottom: 4px; }
    .role-desc { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 16px; }
    .role-avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--bg-surface); margin: 0 auto 8px; display: flex; align-items: center; justify-content: center; }
    .agent-selector { position: relative; }
    .agent-dropdown { position: absolute; top: 100%; left: 0; right: 0; background: var(--bg-surface); border: 1px solid var(--border); border-radius: 8px; max-height: 200px; overflow-y: auto; z-index: 100; display: none; }
    .agent-dropdown.show { display: block; }
    .agent-option { padding: 8px 16px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
    .agent-option:hover { background: var(--bg-hover); }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
    .stat-box { padding: 24px; background: var(--bg-elevated); border-radius: 12px; text-align: center; }
    .stat-value { font-size: 2rem; font-weight: 700; color: var(--themis-primary); }
    .stat-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; }
    @keyframes bellRing { 0%, 100% { transform: rotate(0); } 25% { transform: rotate(15deg); } 75% { transform: rotate(-15deg); } }
    .bell-ringing { animation: bellRing 0.5s ease-in-out; }
    .empty-state { text-align: center; padding: 48px; color: var(--text-muted); }
    .empty-state .icon { font-size: 3rem; margin-bottom: 16px; opacity: 0.5; }
    .toast-container { position: fixed; bottom: 24px; right: 24px; z-index: 1000; }
    .toast { display: flex; align-items: center; gap: 8px; padding: 16px 24px; background: var(--bg-surface); border: 1px solid var(--border); border-radius: 8px; margin-top: 8px; animation: slideIn 0.3s ease; }
    @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    select.form-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 36px; }
  </style>
</head>
<body>
  <div class="app-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo"><span class="icon">âš–ï¸</span><span>THEMIS</span></div>
      </div>
      <nav class="sidebar-nav">
        <a class="nav-item active" data-view="dashboard"><span class="icon">ğŸ“Š</span><span>Dashboard</span></a>
        <a class="nav-item" data-view="deliberate"><span class="icon">ğŸ’¬</span><span>Deliberate</span></a>
        <a class="nav-item" data-view="debates"><span class="icon">âš”ï¸</span><span>Debates</span></a>
        <a class="nav-item" data-view="polls"><span class="icon">ğŸ“</span><span>Polls</span></a>
        <a class="nav-item" data-view="summary"><span class="icon">ğŸ“‹</span><span>Summary</span></a>
        <a class="nav-item" data-view="arguments"><span class="icon">ğŸ•¸ï¸</span><span>Arguments</span></a>
        <a class="nav-item" data-view="roles"><span class="icon">ğŸ­</span><span>Roles</span></a>
      </nav>
    </aside>
    <main class="main-content">
      <header class="header">
        <div class="header-left">
          <a href="index.html" class="back-btn">â† Back to Master</a>
          <div class="agent-profile">
            <div class="agent-avatar-lg">âš–ï¸</div>
            <div class="agent-details"><h1>THEMIS</h1><span>Council & Deliberation Agent</span></div>
          </div>
        </div>
        <div class="header-right">
          <div class="status-badge online" id="status-badge"><span class="status-dot"></span><span id="status-text">Online</span></div>
        </div>
      </header>
      <div class="content-area">
        <!-- Dashboard -->
        <section class="view-section active" id="view-dashboard">
          <h2 class="page-title"><span class="icon">ğŸ“Š</span> Dashboard</h2>
          <div class="grid-3">
            <div class="stat-box"><div class="stat-value" id="stat-deliberations">7</div><div class="stat-label">Active Deliberations</div></div>
            <div class="stat-box"><div class="stat-value" id="stat-consensus">78%</div><div class="stat-label">Avg Consensus</div></div>
            <div class="stat-box"><div class="stat-value" id="stat-participants">12</div><div class="stat-label">Total Participants</div></div>
          </div>
          <div class="card" style="margin-top:32px;">
            <div class="card-header"><h3 class="card-title"><span>ğŸ“ˆ</span> Consensus Trend</h3></div>
            <div class="chart-container"><canvas id="consensus-chart"></canvas></div>
          </div>
          <div class="grid-2" style="margin-top:24px;">
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>ğŸ’¬</span> Recent Deliberations</h3></div>
              <div id="recent-deliberations">
                <div class="transcript-entry"><div class="transcript-speaker">Q1 Budget Allocation</div><div class="transcript-text">3 participants â€¢ Consensus: 82%</div><div class="transcript-time">2 hours ago</div></div>
                <div class="transcript-entry"><div class="transcript-speaker">Feature Priority Review</div><div class="transcript-text">5 participants â€¢ Consensus: 65%</div><div class="transcript-time">5 hours ago</div></div>
                <div class="transcript-entry"><div class="transcript-speaker">Security Policy Update</div><div class="transcript-text">4 participants â€¢ Consensus: 91%</div><div class="transcript-time">Yesterday</div></div>
              </div>
            </div>
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>âš”ï¸</span> Active Debates</h3></div>
              <div id="active-debates">
                <div class="transcript-entry"><div class="transcript-speaker">Microservices vs Monolith</div><div class="transcript-text">Pro: 3 â€¢ Con: 2 â€¢ Round 2/4</div><div class="transcript-time">In Progress</div></div>
                <div class="transcript-entry"><div class="transcript-speaker">Remote Work Policy</div><div class="transcript-text">Pro: 2 â€¢ Con: 4 â€¢ Round 1/3</div><div class="transcript-time">In Progress</div></div>
              </div>
            </div>
          </div>
        </section>
        <!-- Deliberation -->
        <section class="view-section" id="view-deliberate">
          <h2 class="page-title"><span class="icon">ğŸ’¬</span> Council Deliberation</h2>
          <div class="grid-2">
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>ğŸ¯</span> New Deliberation</h3></div>
              <div class="form-group"><label class="form-label">Topic</label><input type="text" class="form-input" id="deliberation-topic" placeholder="What should we discuss?"></div>
              <div class="form-group">
                <label class="form-label">Add Participants</label>
                <div class="agent-selector"><input type="text" class="form-input" id="participant-input" placeholder="Search agents..."><div class="agent-dropdown" id="agent-dropdown"><div class="agent-option" data-agent="Athena">ğŸ¤– Athena</div><div class="agent-option" data-agent="Sterling">ğŸª™ Sterling</div><div class="agent-option" data-agent="Ishtar">ğŸ›ï¸ Ishtar</div><div class="agent-option" data-agent="Felicity">ğŸ¨ Felicity</div><div class="agent-option" data-agent="Prometheus">ğŸ”¥ Prometheus</div><div class="agent-option" data-agent="Delver">ğŸ•µï¸ Delver</div><div class="agent-option" data-agent="Squire">ğŸ›¡ï¸ Squire</div><div class="agent-option" data-agent="Cisco">ğŸŒ Cisco</div></div></div>
                <div class="participant-list" id="participant-list"></div>
              </div>
              <div class="form-group"><label class="form-label">Round Duration</label><select class="form-select" id="round-duration"><option value="1">1 minute</option><option value="3" selected>3 minutes</option><option value="5">5 minutes</option><option value="10">10 minutes</option></select></div>
              <button class="btn btn-primary" id="start-deliberation">Start Deliberation</button>
            </div>
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>â±ï¸</span> Timer</h3></div>
              <div class="timer-display" id="deliberation-timer">03:00</div>
              <div class="timer-controls"><button class="btn btn-success" id="start-timer">Start</button><button class="btn btn-warning" id="pause-timer">Pause</button><button class="btn btn-danger" id="reset-timer">Reset</button></div>
            </div>
          </div>
          <div class="card" style="margin-top:24px;">
            <div class="card-header"><h3 class="card-title"><span>ğŸ“</span> Transcript</h3><button class="btn btn-secondary" id="add-statement">+ Add Statement</button></div>
            <div class="transcript" id="deliberation-transcript"><div class="empty-state"><div class="icon">ğŸ’¬</div><p>Start a deliberation to see the transcript</p></div></div>
          </div>
          <div class="card" style="margin-top:24px;">
            <div class="card-header"><h3 class="card-title"><span>ğŸ“Š</span> Consensus Building</h3></div>
            <div class="grid-3">
              <div><div class="form-label">Agreement Score</div><div class="progress-bar" style="height:16px"><div class="progress-fill" id="agreement-score" style="width:0%"></div></div><div style="text-align:center;margin-top:8px;font-weight:600" id="agreement-value">0%</div></div>
              <div><div class="form-label">Convergence Trend</div><div class="chart-container" style="height:100px"><canvas id="convergence-chart"></canvas></div></div>
              <div><div class="form-label">Minority Opinions</div><div id="minority-opinions"><div class="empty-state" style="padding:16px"><p style="font-size:0.75rem">No minority opinions yet</p></div></div></div>
            </div>
          </div>
        </section>
        <!-- Debates -->
        <section class="view-section" id="view-debates">
          <h2 class="page-title"><span class="icon">âš”ï¸</span> Debate Orchestration</h2>
          <div class="card">
            <div class="card-header"><h3 class="card-title"><span>ğŸ¯</span> New Debate</h3></div>
            <div class="form-group"><label class="form-label">Debate Topic</label><input type="text" class="form-input" id="debate-topic" placeholder="What are we debating?"></div>
            <div class="grid-2">
              <div class="form-group"><label class="form-label">Pro Side</label><input type="text" class="form-input" id="pro-input" placeholder="Add pro participants..."><div class="participant-list" id="pro-list"></div></div>
              <div class="form-group"><label class="form-label">Con Side</label><input type="text" class="form-input" id="con-input" placeholder="Add con participants..."><div class="participant-list" id="con-list"></div></div>
            </div>
            <div class="form-group"><label class="form-label">Rounds</label><select class="form-select" id="debate-rounds"><option value="2">2 Rounds</option><option value="3" selected>3 Rounds</option><option value="4">4 Rounds</option></select></div>
            <button class="btn btn-primary" id="start-debate">Start Debate</button>
          </div>
          <div class="card" style="margin-top:24px;display:none" id="active-debate-panel">
            <div class="card-header"><h3 class="card-title"><span>âš”ï¸</span> <span id="current-debate-topic">Debate in Progress</span></h3><div style="display:flex;align-items:center;gap:16px"><span id="debate-round">Round 1/3</span><button class="btn btn-warning" id="debate-bell">ğŸ”” Ring Bell</button></div></div>
            <div class="timer-display" id="debate-timer">05:00</div>
            <div class="timer-controls"><button class="btn btn-success" id="start-debate-timer">Start</button><button class="btn btn-warning" id="pause-debate-timer">Pause</button><button class="btn btn-danger" id="reset-debate-timer">Reset</button></div>
            <div class="debate-split" style="margin-top:24px">
              <div class="debate-side pro"><h3>âœ… Pro <span id="pro-score">(0)</span></h3><div class="transcript" id="pro-arguments"><div class="empty-state" style="padding:16px"><p>Pro arguments will appear here</p></div></div><div style="margin-top:16px"><input type="text" class="form-input" id="pro-argument-input" placeholder="Add pro argument..."><button class="btn btn-success" style="margin-top:8px" id="add-pro-argument">Add Argument</button></div></div>
              <div class="debate-side con"><h3>âŒ Con <span id="con-score">(0)</span></h3><div class="transcript" id="con-arguments"><div class="empty-state" style="padding:16px"><p>Con arguments will appear here</p></div></div><div style="margin-top:16px"><input type="text" class="form-input" id="con-argument-input" placeholder="Add con argument..."><button class="btn btn-danger" style="margin-top:8px" id="add-con-argument">Add Argument</button></div></div>
            </div>
            <div style="margin-top:24px;text-align:center"><button class="btn btn-primary" id="score-argument">Score Arguments</button><button class="btn btn-secondary" id="next-round">Next Round â†’</button></div>
          </div>
        </section>
        <!-- Polls -->
        <section class="view-section" id="view-polls">
          <h2 class="page-title"><span class="icon">ğŸ“</span> Polling & Voting</h2>
          <div class="grid-2">
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>â•</span> Create Poll</h3></div>
              <div class="form-group"><label class="form-label">Question</label><input type="text" class="form-input" id="poll-question" placeholder="What would you like to ask?"></div>
              <div class="form-group"><label class="form-label">Vote Type</label><select class="form-select" id="vote-type"><option value="single">Single Choice</option><option value="multiple">Multiple Choice</option><option value="ranked">Ranked Choice</option></select></div>
              <div class="form-group"><label class="form-label">Options (one per line)</label><textarea class="form-textarea" id="poll-options" placeholder="Option A&#10;Option B&#10;Option C"></textarea></div>
              <button class="btn btn-primary" id="create-poll">Create Poll</button>
            </div>
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>ğŸ“Š</span> Active Polls</h3></div>
              <div id="active-polls-list">
                <div class="transcript-entry"><div class="transcript-speaker">Best Framework?</div><div class="transcript-text">React â€¢ Vue â€¢ Angular â€¢ Svelte</div><div class="transcript-time">24 votes</div></div>
                <div class="transcript-entry"><div class="transcript-speaker">Next Sprint Priority</div><div class="transcript-text">Performance â€¢ Security â€¢ Features</div><div class="transcript-time">18 votes</div></div>
              </div>
            </div>
          </div>
          <div class="card" style="margin-top:24px" id="poll-voting-panel">
            <div class="card-header"><h3 class="card-title"><span>ğŸ—³ï¸</span> Vote</h3></div>
            <div id="poll-voting-options">
              <div class="poll-option" data-option="React"><span>React</span><span class="vote-count">24</span></div>
              <div class="poll-option" data-option="Vue"><span>Vue</span><span class="vote-count">18</span></div>
              <div class="poll-option" data-option="Angular"><span>Angular</span><span class="vote-count">12</span></div>
              <div class="poll-option" data-option="Svelte"><span>Svelte</span><span class="vote-count">8</span></div>
            </div>
            <button class="btn btn-primary" style="margin-top:16px" id="submit-vote">Submit Vote</button>
          </div>
          <div class="card" style="margin-top:24px">
            <div class="card-header"><h3 class="card-title"><span>ğŸ“ˆ</span> Live Results</h3></div>
            <div class="poll-results" id="poll-results">
              <div class="poll-result-bar"><span class="label">React</span><div class="bar"><div class="fill" style="width:38%">38%</div></div><span class="percent">38%</span></div>
              <div class="poll-result-bar"><span class="label">Vue</span><div class="bar"><div class="fill" style="width:29%">29%</div></div><span class="percent">29%</span></div>
              <div class="poll-result-bar"><span class="label">Angular</span><div class="bar"><div class="fill" style="width:19%">19%</div></div><span class="percent">19%</span></div>
              <div class="poll-result-bar"><span class="label">Svelte</span><div class="bar"><div class="fill" style="width:14%">14%</div></div><span class="percent">14%</span></div>
            </div>
          </div>
        </section>
        <!-- Summary -->
        <section class="view-section" id="view-summary">
          <h2 class="page-title"><span class="icon">ğŸ“‹</span> Summary Generation</h2>
          <div class="grid-2">
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>ğŸ¯</span> Select Deliberation</h3></div>
              <div class="form-group"><label class="form-label">Choose a deliberation to summarize</label><select class="form-select" id="deliberation-select"><option>Q1 Budget Allocation</option><option>Feature Priority Review</option><option>Security Policy Update</option><option>API Design Decisions</option></select></div>
              <button class="btn btn-primary" id="generate-summary">Generate Summary</button>
            </div>
            <div class="card">
              <div class="card-header"><h3 class="card-title"><span>ğŸ¤–</span> AI Summary</h3></div>
              <div class="summary-content" id="summary-text">
                <p>After extensive deliberation, the council reached the following conclusions regarding the Q1 Budget Allocation:</p>
                <p><strong>Key Points:</strong></p>
                <ul>
                  <li>Infrastructure upgrades prioritized (60% of budget)</li>
                  <li>New hire budget approved with 3 positions</li>
                  <li>Marketing campaign allocation increased by 15%</li>
                </ul>
                <p><strong>Consensus:</strong> 82% agreement reached after 3 rounds of discussion.</p>
              </div>
            </div>
          </div>
          <div class="card" style="margin-top:24px">
            <div class="card-header"><h3 class="card-title"><span>âœ…</span> Action Items</h3></div>
            <div class="action-items" id="action-items">
              <div class="action-item"><input type="checkbox" class="action-checkbox"><span>Finalize Q1 budget breakdown by Feb 15</span></div>
              <div class="action-item"><input type="checkbox" class="action-checkbox"><span>Schedule interviews for 3 new positions</span></div>
              <div class="action-item"><input type="checkbox" class="action-checkbox"><span>Draft marketing campaign proposal</span></div>
              <div class="action-item"><input type="checkbox" class="action-checkbox"><span>Review infrastructure vendor proposals</span></div>
            </div>
          </div>
        </section>
        <!-- Arguments -->
        <section class="view-section" id="view-arguments">
          <h2 class="page-title"><span class="icon">ğŸ•¸ï¸</span> Argument Mapping</h2>
          <div class="card">
            <div class="card-header">
              <h3 class="card-title"><span>ğŸ¯</span> Argument Tree</h3>
              <div><button class="btn btn-secondary" id="add-claim">+ Claim</button><button class="btn btn-secondary" id="add-evidence">+ Evidence</button><button class="btn btn-secondary" id="add-opposition">+ Opposition</button></div>
            </div>
            <div class="argument-canvas" id="argument-canvas">
              <div class="arg-node claim" style="left:50%;top:20px">
                <div class="arg-node-type">Claim</div>
                <div class="arg-node-title">Microservices are better</div>
              </div>
              <div class="arg-node evidence" style="left:20%;top:150px">
                <div class="arg-node-type">Evidence</div>
                <div class="arg-node-title">Easier scaling</div>
              </div>
              <div class="arg-node evidence" style="left:50%;top:150px">
                <div class="arg-node-type">Evidence</div>
                <div class="arg-node-title">Team autonomy</div>
              </div>
              <div class="arg-node opposition" style="left:80%;top:150px">
                <div class="arg-node-type">Opposition</div>
                <div class="arg-node-title">Higher complexity</div>
              </div>
              <div class="arg-node evidence" style="left:30%;top:280px">
                <div class="arg-node-type">Evidence</div>
                <div class="arg-node-title">Horizontal scaling</div>
              </div>
              <div class="arg-node evidence" style="left:70%;top:280px">
                <div class="arg-node-type">Evidence</div>
                <div class="arg-node-title">Ops overhead</div>
              </div>
            </div>
          </div>
        </section>
        <!-- Roles -->
        <section class="view-section" id="view-roles">
          <h2 class="page-title"><span class="icon">ğŸ­</span> Role Assignment</h2>
          <div class="card">
            <div class="card-header"><h3 class="card-title"><span>ğŸ‘¥</span> Assign Roles</h3></div>
            <div class="role-grid" id="role-grid">
              <div class="role-card" data-role="facilitator">
                <div class="role-icon">ğŸ¯</div>
                <div class="role-name">Facilitator</div>
                <div class="role-desc">Guides discussion, ensures fairness</div>
                <div class="role-avatar" id="facilitator-avatar"></div>
                <select class="form-select" data-role-select="facilitator"><option value="">Select agent...</option><option value="Athena">ğŸ¤– Athena</option><option value="Sterling">ğŸª™ Sterling</option><option value="Ishtar">ğŸ›ï¸ Ishtar</option><option value="Felicity">ğŸ¨ Felicity</option><option value="Prometheus">ğŸ”¥ Prometheus</option></select>
              </div>
              <div class="role-card" data-role="timekeeper">
                <div class="role-icon">â±ï¸</div>
                <div class="role-name">Timekeeper</div>
                <div class="role-desc">Manages round timings</div>
                <div class="role-avatar" id="timekeeper-avatar"></div>
                <select class="form-select" data-role-select="timekeeper"><option value="">Select agent...</option><option value="Athena">ğŸ¤– Athena</option><option value="Sterling">ğŸª™ Sterling</option><option value="Ishtar">ğŸ›ï¸ Ishtar</option><option value="Felicity">ğŸ¨ Felicity</option><option value="Prometheus">ğŸ”¥ Prometheus</option></select>
              </div>
              <div class="role-card" data-role="notetaker">
                <div class="role-icon">ğŸ“</div>
                <div class="role-name">Note-taker</div>
                <div class="role-desc">Records key points</div>
                <div class="role-avatar" id="notetaker-avatar"></div>
                <select class="form-select" data-role-select="notetaker"><option value="">Select agent...</option><option value="Athena">ğŸ¤– Athena</option><option value="Sterling">ğŸª™ Sterling</option><option value="Ishtar">ğŸ›ï¸ Ishtar</option><option value="Felicity">ğŸ¨ Felicity</option><option value="Prometheus">ğŸ”¥ Prometheus</option></select>
              </div>
              <div class="role-card" data-role="scribe">
                <div class="role-icon">âœï¸</div>
                <div class="role-name">Scribe</div>
                <div class="role-desc">Documents final decisions</div>
                <div class="role-avatar" id="scribe-avatar"></div>
                <select class="form-select" data-role-select="scribe"><option value="">Select agent...</option><option value="Athena">ğŸ¤– Athena</option><option value="Sterling">ğŸª™ Sterling</option><option value="Ishtar">ğŸ›ï¸ Ishtar</option><option value="Felicity">ğŸ¨ Felicity</option><option value="Prometheus">ğŸ”¥ Prometheus</option></select>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
  <div class="toast-container" id="toast-container"></div>
  <script>
    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
        item.classList.add('active');
        document.getElementById('view-' + item.dataset.view).classList.add('active');
      });
    });

    // Toast notifications
    function showToast(message, type = 'info') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.innerHTML = '<span>' + {success:'âœ…',error:'âŒ',warning:'âš ï¸',info:'â„¹ï¸'}[type] + '</span><span>' + message + '</span>';
      container.appendChild(toast);
      setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 300); }, 4000);
    }

    // Deliberation Timer
    let deliberationTime = 180;
    let deliberationInterval = null;
    function updateDeliberationTimer() {
      const mins = Math.floor(deliberationTime / 60);
      const secs = deliberationTime % 60;
      document.getElementById('deliberation-timer').textContent = String(mins).padStart(2,'0') + ':' + String(secs).padStart(2,'0');
    }
    document.getElementById('start-timer').addEventListener('click', () => {
      if (!deliberationInterval) {
        deliberationInterval = setInterval(() => { if (deliberationTime > 0) { deliberationTime--; updateDeliberationTimer(); } else { clearInterval(deliberationInterval); deliberationInterval = null; showToast('Time is up!', 'warning'); } }, 1000);
      }
    });
    document.getElementById('pause-timer').addEventListener('click', () => { clearInterval(deliberationInterval); deliberationInterval = null; });
    document.getElementById('reset-timer').addEventListener('click', () => { clearInterval(deliberationInterval); deliberationInterval = null; deliberationTime = parseInt(document.getElementById('round-duration').value) * 60; updateDeliberationTimer(); });

    // Agent dropdown
    const participantInput = document.getElementById('participant-input');
    const agentDropdown = document.getElementById('agent-dropdown');
    participantInput.addEventListener('focus', () => agentDropdown.classList.add('show'));
    document.addEventListener('click', (e) => { if (!e.target.closest('.agent-selector')) agentDropdown.classList.remove('show'); });
    document.querySelectorAll('.agent-option').forEach(opt => {
      opt.addEventListener('click', () => {
        const list = document.getElementById('participant-list');
        const chip = document.createElement('div');
        chip.className = 'participant-chip';
        chip.innerHTML = '<span>' + opt.textContent + '</span><span class="remove" data-agent="' + opt.dataset.agent + '">Ã—</span>';
        list.appendChild(chip);
        participantInput.value = '';
        agentDropdown.classList.remove('show');
        chip.querySelector('.remove').addEventListener('click', () => chip.remove());
      });
    });

    // Start deliberation
    document.getElementById('start-deliberation').addEventListener('click', () => {
      const topic = document.getElementById('deliberation-topic').value;
      if (!topic) { showToast('Please enter a topic', 'error'); return; }
      const transcript = document.getElementById('deliberation-transcript');
      transcript.innerHTML = '<div class="transcript-entry"><div class="transcript-speaker">THEMIS</div><div class="transcript-text">Deliberation started: "' + topic + '"</div><div class="transcript-time">Just now</div></div>';
      document.getElementById('agreement-score').style.width = '15%';
      document.getElementById('agreement-value').textContent = '15%';
      document.getElementById('status-badge').className = 'status-badge deliberating';
      document.getElementById('status-text').textContent = 'Deliberating';
      showToast('Deliberation started: ' + topic, 'success');
    });

    // Add statement
    document.getElementById('add-statement').addEventListener('click', () => {
      const speaker = prompt('Speaker name:');
      const text = prompt('Statement:');
      if (speaker && text) {
        const transcript = document.getElementById('deliberation-transcript');
        const entry = document.createElement('div');
        entry.className = 'transcript-entry';
        entry.innerHTML = '<div class="transcript-speaker">' + speaker + '</div><div class="transcript-text">' + text + '</div><div class="transcript-time">Just now</div>';
        transcript.appendChild(entry);
        transcript.scrollTop = transcript.scrollHeight;
        const score = Math.floor(Math.random() * 20) + 60;
        document.getElementById('agreement-score').style.width = score + '%';
        document.getElementById('agreement-value').textContent = score + '%';
      }
    });

    // Debate
    let proScore = 0, conScore = 0, currentRound = 1, totalRounds = 3;
    document.getElementById('start-debate').addEventListener('click', () => {
      const topic = document.getElementById('debate-topic').value;
      if (!topic) { showToast('Please enter a debate topic', 'error'); return; }
      document.getElementById('active-debate-panel').style.display = 'block';
      document.getElementById('current-debate-topic').textContent = topic;
      totalRounds = parseInt(document.getElementById('debate-rounds').value);
      document.getElementById('debate-round').textContent = 'Round ' + currentRound + '/' + totalRounds;
      showToast('Debate started: ' + topic, 'success');
    });
    document.getElementById('add-pro-argument').addEventListener('click', () => {
      const input = document.getElementById('pro-argument-input');
      if (input.value) {
        const args = document.getElementById('pro-arguments');
        if (args.querySelector('.empty-state')) args.innerHTML = '';
        args.innerHTML += '<div class="transcript-entry"><div class="transcript-speaker">Pro</div><div class="transcript-text">' + input.value + '</div></div>';
        input.value = '';
      }
    });
    document.getElementById('add-con-argument').addEventListener('click', () => {
      const input = document.getElementById('con-argument-input');
      if (input.value) {
        const args = document.getElementById('con-arguments');
        if (args.querySelector('.empty-state')) args.innerHTML = '';
        args.innerHTML += '<div class="transcript-entry"><div class="transcript-speaker">Con</div><div class="transcript-text">' + input.value + '</div></div>';
        input.value = '';
      }
    });
    document.getElementById('score-argument').addEventListener('click', () => {
      proScore += Math.floor(Math.random() * 10) + 5;
      conScore += Math.floor(Math.random() * 10) + 5;
      document.getElementById('pro-score').textContent = '(' + proScore + ')';
      document.getElementById('con-score').textContent = '(' + conScore + ')';
      showToast('Arguments scored!', 'success');
    });
    document.getElementById('next-round').addEventListener('click', () => {
      if (currentRound < totalRounds) {
        currentRound++;
        document.getElementById('debate-round').textContent = 'Round ' + currentRound + '/' + totalRounds;
        showToast('Round ' + currentRound + ' started', 'info');
      } else {
        showToast('Debate concluded!', 'success');
      }
    });
    document.getElementById('debate-bell').addEventListener('click', function() {
      this.classList.add('bell-ringing');
      setTimeout(() => this.classList.remove('bell-ringing'), 500);
      showToast('Bell rung!', 'warning');
    });

    // Debate timer
    let debateTime = 300;
    let debateInterval = null;
    function updateDebateTimer() {
      const mins = Math.floor(debateTime / 60);
      const secs = debateTime % 60;
      document.getElementById('debate-timer').textContent = String(mins).padStart(2,'0') + ':' + String(secs).padStart(2,'0');
    }
    document.getElementById('start-debate-timer').addEventListener('click', () => {
      if (!debateInterval) {
        debateInterval = setInterval(() => { if (debateTime > 0) { debateTime--; updateDebateTimer(); } else { clearInterval(debateInterval); debateInterval = null; showToast('Round time!', 'warning'); } }, 1000);
      }
    });
    document.getElementById('pause-debate-timer').addEventListener('click', () => { clearInterval(debateInterval); debateInterval = null; });
    document.getElementById('reset-debate-timer').addEventListener('click', () => { clearInterval(debateInterval); debateInterval = null; debateTime = 300; updateDebateTimer(); });

    // Polls
    document.querySelectorAll('.poll-option').forEach(opt => {
      opt.addEventListener('click', () => {
        const voteType = document.getElementById('vote-type').value;
        if (voteType === 'multiple') {
          opt.classList.toggle('selected');
        } else {
          document.querySelectorAll('.poll-option').forEach(o => o.classList.remove('selected'));
          opt.classList.add('selected');
        }
      });
    });
    document.getElementById('submit-vote').addEventListener('click', () => {
      const selected = document.querySelectorAll('.poll-option.selected');
      if (selected.length === 0) { showToast('Please select an option', 'error'); return; }
      selected.forEach(opt => {
        const count = parseInt(opt.querySelector('.vote-count').textContent) + 1;
        opt.querySelector('.vote-count').textContent = count;
      });
      showToast('Vote submitted!', 'success');
    });
    document.getElementById('create-poll').addEventListener('click', () => {
      const question = document.getElementById('poll-question').value;
      if (!question) { showToast('Please enter a question', 'error'); return; }
      showToast('Poll created: ' + question, 'success');
    });

    // Roles
    document.querySelectorAll('[data-role-select]').forEach(select => {
      select.addEventListener('change', () => {
        const role = select.dataset.roleSelect;
        const card = select.closest('.role-card');
        const avatar = card.querySelector('.role-avatar');
        if (select.value) {
          const agents = {Athena:'ğŸ¤–',Sterling:'ğŸª™',Ishtar:'ğŸ›ï¸',Felicity:'ğŸ¨',Prometheus:'ğŸ”¥',Delver:'ğŸ•µï¸',Squire:'ğŸ›¡ï¸',Cisco:'ğŸŒ'};
          avatar.textContent = agents[select.value] || 'ğŸ¤–';
          card.classList.add('filled');
          showToast(select.value + ' assigned as ' + role, 'success');
        } else {
          avatar.textContent = '';
          card.classList.remove('filled');
        }
      });
    });

    // Charts (simple canvas drawing)
    function drawChart(canvasId, data, color) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const w = canvas.width = canvas.offsetWidth;
      const h = canvas.height = canvas.offsetHeight;
      ctx.clearRect(0, 0, w, h);
      ctx.strokeStyle = color || '#22d3ee';
      ctx.lineWidth = 2;
      ctx.beginPath();
      data.forEach((v, i) => {
        const x = (i / (data.length - 1)) * w;
        const y = h - (v / 100) * h;
        if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      });
      ctx.stroke();
    }
    drawChart('consensus-chart', [65, 72, 68, 78, 82, 75, 78]);
    drawChart('convergence-chart', [40, 55, 65, 72, 80], '#10b981');

    // Initial toast
    setTimeout(() => showToast('Welcome to THEMIS Dashboard', 'info'), 500);
  </script>
</body>
</html>